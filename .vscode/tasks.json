{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Start All Servers",
            "dependsOn": [
                "Start Embedding Server",
                "Start Llama.cpp Server",
                "Start Rag Server"
            ],
            "dependsOrder": "parallel",
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            },
            "problemMatcher": []
        },
        {
            "label": "Stop All Servers",
            "dependsOn": [
                "Stop Llama.cpp Server",
                "Stop Embedding Server",
                "Stop Rag Server"
            ],
            "dependsOrder": "parallel",
            "group": {
                "kind": "test",
                "isDefault": false
            },
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "group": "servers"
            },
            "problemMatcher": []
        },
        {
            "label": "Start Llama.cpp Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-ExecutionPolicy",
                "Bypass",
                "-File",
                "C:\\Users\\marku\\.continue\\llama-vscode-autostart.ps1"
            ],
            "isBackground": true,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            }
        },
        {
            "label": "Stop Llama.cpp Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-Command",
                "Get-Process llama-server -ErrorAction SilentlyContinue | Stop-Process -Force"
            ],
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "group": "servers"
            }
        },
        {
            "label": "Start Embedding Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-ExecutionPolicy",
                "Bypass",
                "-File",
                "${workspaceFolder}/../embedding-server-misc/start.ps1"
            ],
            "isBackground": true,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            }
        },
        {
            "label": "Stop Embedding Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-Command",
                "Get-Process python -ErrorAction SilentlyContinue | Where-Object { $_.CommandLine -like '*embedding_server*' } | Stop-Process -Force"
            ],
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "group": "servers"
            }
        },
        {
            "label": "Start Rag Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-ExecutionPolicy",
                "Bypass",
                "-File",
                "${workspaceFolder}/../rag-server-misc/start.ps1"
            ],
            "isBackground": true,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            }
        },
        {
            "label": "Stop Rag Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-ExecutionPolicy",
                "Bypass",
                "-File",
                "${workspaceFolder}/../rag-server-misc/stop.ps1"
            ],
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "group": "servers"
            }
        },
        {
            "label": "Start MCP Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-ExecutionPolicy",
                "Bypass",
                "-File",
                "${workspaceFolder}/../mcp-server-misc/start.ps1"
            ],
            "isBackground": true,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            }
        },
        {
            "label": "Stop MCP Server",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-Command",
                "Get-Process python -ErrorAction SilentlyContinue | Where-Object { $_.CommandLine -like '*mcp_server*' } | Stop-Process -Force"
            ],
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "group": "servers"
            }
        },
        {
            "label": "Show Server Status",
            "type": "shell",
            "command": "pwsh",
            "args": [
                "-NoProfile",
                "-Command",
                "Write-Host 'LLAMA SERVER:' -ForegroundColor Cyan; Get-Process llama-server -ErrorAction SilentlyContinue | Select-Object ProcessName, Id, CPU, Memory; Write-Host 'EMBEDDING SERVER:' -ForegroundColor Cyan; Get-Process python -ErrorAction SilentlyContinue | Where-Object { $_.CommandLine -like '*embedding*' } | Select-Object ProcessName, Id, CPU, Memory; Write-Host 'MCP SERVER:' -ForegroundColor Cyan; Get-Process python -ErrorAction SilentlyContinue | Where-Object { $_.CommandLine -like '*mcp*' } | Select-Object ProcessName, Id, CPU, Memory"
            ],
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "group": "servers"
            },
            "problemMatcher": []
        },
        {
            "label": "LLM: MCP Smoke Tests",
            "type": "shell",
            "command": "python",
            "args": [
                "-m",
                "pytest",
                "llm-test-suite/tests/mcp/",
                "-v",
                "--color=yes",
                "--tb=short"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "clear": true
            },
            "problemMatcher": []
        },
        {
            "label": "LLM: Embedding Smoke Tests",
            "type": "shell",
            "command": "python",
            "args": [
                "-m",
                "pytest",
                "llm-test-suite/tests/embedding/",
                "-v",
                "--color=yes",
                "--tb=short"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "clear": true
            },
            "problemMatcher": []
        },
        {
            "label": "LLM: ALL Smoke Tests",
            "type": "shell",
            "command": "python",
            "args": [
                "-m",
                "pytest",
                "llm-test-suite/tests/",
                "-v",
                "--color=yes",
                "--tb=short",
                "-k",
                "smoke"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "clear": true
            },
            "problemMatcher": [],
            "dependsOn": [
                "LLM: MCP Smoke Tests",
                "LLM: Embedding Smoke Tests",
                "LLM: RAG Smoke Tests"
            ]
        },
        {
            "label": "LLM: RAG Smoke Tests",
            "type": "shell",
            "command": "python",
            "args": [
                "-m",
                "pytest",
                "llm-test-suite/tests/rag/",
                "-v",
                "--color=yes",
                "--tb=short"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "isBackground": false,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "clear": true
            },
            "problemMatcher": []
        }
    ]
}